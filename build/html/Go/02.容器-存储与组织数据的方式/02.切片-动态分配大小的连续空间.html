

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.2. 切片-动态分配大小的连续空间 &mdash; 运维开发修炼之路</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'1.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.3. 02.映射（map）-建立事务关联的容器" href="03.映射（map）-建立事务关联的容器.html" />
    <link rel="prev" title="2.1. 数组-固定大小的连续空间" href="01.数组-固定大小的连续空间.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> 小健_Linux-Python-Devops_Blog
          

          
            
            <img src="../../_static/python_go.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Go语言学习</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01.Go语言基本语法与使用/index.html">1. Go语言基本语法与使用</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2. 容器-存储与组织数据的方式</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01.数组-固定大小的连续空间.html">2.1. 数组-固定大小的连续空间</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.2. 切片-动态分配大小的连续空间</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">2.2.1. 切片</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="03.映射（map）-建立事务关联的容器.html">2.3. 02.映射（map）-建立事务关联的容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="04.列表-可以快速增删的非连续空间的容器.html">2.4. 列表-可以快速增删的非连续空间的容器</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03.流程控制/index.html">3. 流程控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.函数/index.html">4. 函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.结构体/index.html">5. 结构体</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06.接口/index.html">6. 接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07.包/index.html">7. 包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08.并发/index.html">8. 并发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09.Go语言基础之反射/index.html">9. Go语言基础之反射</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10.Go标准库/index.html">10. Go标准库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11.项目代码/index.html">11. 项目代码</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Python/index.html">Python自动化运维</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Go_vs_Python/index.html">Go vs Python</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Linux-Python-Devops_Blog</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Go语言学习</a> &raquo;</li>
        
          <li><a href="index.html">2. 容器-存储与组织数据的方式</a> &raquo;</li>
        
      <li>2.2. 切片-动态分配大小的连续空间</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Go/02.容器-存储与组织数据的方式/02.切片-动态分配大小的连续空间.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id13">切片-动态分配大小的连续空间</a><ul>
<li><a class="reference internal" href="#id2" id="id14">切片</a><ul>
<li><a class="reference internal" href="#id3" id="id15">从数组切片生成新的切片</a></li>
<li><a class="reference internal" href="#id4" id="id16">声明切片</a></li>
<li><a class="reference internal" href="#make" id="id17">使用make()函数构造切片</a></li>
<li><a class="reference internal" href="#append" id="id18">使用append()函数为切片添加元素</a></li>
<li><a class="reference internal" href="#id5" id="id19">切片与数组的关系</a></li>
<li><a class="reference internal" href="#id8" id="id20">组合两个切片到一个切片中</a></li>
<li><a class="reference internal" href="#id9" id="id21">复制切片元素到另一个切片</a></li>
<li><a class="reference internal" href="#id10" id="id22">迭代切片</a></li>
<li><a class="reference internal" href="#id11" id="id23">从切片中删除元素</a></li>
<li><a class="reference internal" href="#id12" id="id24">在函数间传递切片</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id1">
<h1><a class="toc-backref" href="#id13">2.2. 切片-动态分配大小的连续空间</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id14">2.2.1. 切片</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id15">从数组切片生成新的切片</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>slice [开始位置：结束位置]

· slice表示目标切片对象
· 开始位置对应目标切片对象的索引
· 结束位置对于目标切片的结束索引
</pre></div>
</div>
<p>从数组生成切片，代码如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">array_list</span><span class="p">,</span><span class="n">array_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>     <span class="o">//</span> <span class="p">[</span><span class="n">hujianli1</span> <span class="n">hujianli2</span> <span class="n">hujianli3</span><span class="p">]</span> <span class="p">[</span><span class="n">hujianli2</span><span class="p">]</span>
</pre></div>
</div>
<p>(1)从指定范围中生成切片</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">number2</span> <span class="p">[</span><span class="mi">30</span><span class="p">]</span><span class="nb">int</span>
    <span class="o">//</span> <span class="n">循环出1</span><span class="o">~</span><span class="mi">30</span>
    <span class="k">for</span> <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">number2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">区间</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">number2</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">])</span> <span class="o">//</span><span class="p">[</span><span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span><span class="p">]</span>
    <span class="o">//</span> <span class="n">中间到尾部的所有元素</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">number2</span><span class="p">[</span><span class="mi">20</span><span class="p">:])</span>   <span class="o">//</span><span class="p">[</span><span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span><span class="p">]</span>



<span class="p">}</span>
</pre></div>
</div>
<p>(2)表示原有切片</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">number2</span><span class="p">[:])</span>     <span class="o">//</span><span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p class="first">重置切片，清空所有元素</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">number2</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">])</span>   <span class="o">//</span><span class="p">[]</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id16">声明切片</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>每一种类型都可以拥有其切片类型，表示多个类型元素的连续集合，因此切片类型也可以被声明。</p>
<p>切片类型声明格式如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">name</span> <span class="p">[]</span><span class="n">T</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">strList</span>  <span class="p">[]</span><span class="n">string</span>       <span class="o">//</span> <span class="n">声明字符串切片</span>
    <span class="n">var</span> <span class="n">numList</span> <span class="p">[]</span><span class="nb">int</span>           <span class="o">//</span> <span class="n">声明整型切片</span>
    <span class="n">var</span> <span class="n">numListEmpty</span> <span class="o">=</span> <span class="p">[]</span><span class="nb">int</span><span class="p">{}</span>  <span class="o">//</span> <span class="n">声明一个空切片</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">strList</span><span class="p">,</span><span class="n">numList</span><span class="p">,</span><span class="n">numListEmpty</span><span class="p">)</span>   <span class="o">//</span> <span class="n">输出3个切片</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">strList</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">numList</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">numListEmpty</span><span class="p">))</span>    <span class="o">//</span><span class="n">输出3个切片大小</span>
    <span class="o">//</span> <span class="n">切片判定空的结果</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">strList</span> <span class="o">==</span> <span class="n">nil</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">numList</span> <span class="o">==</span> <span class="n">nil</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">numListEmpty</span> <span class="o">==</span> <span class="n">nil</span><span class="p">)</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="make">
<h3><a class="toc-backref" href="#id17">使用make()函数构造切片</a><a class="headerlink" href="#make" title="Permalink to this headline">¶</a></h3>
<p>如果需要动态地创建一个切片，可以使用make()内建函数，格式如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>make([]T, size, cap)

· T：切片的元素类型。
· size：就是为这个类型分配多少个元素
· cap： 预分配的元素数量，降低多次分配空间造成的性能问题
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="p">:</span><span class="o">=</span> <span class="n">make</span><span class="p">([]</span><span class="nb">int</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">b</span> <span class="p">:</span><span class="o">=</span> <span class="n">make</span><span class="p">([]</span><span class="nb">int</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>        <span class="o">//</span><span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>  <span class="o">//</span><span class="mi">2</span> <span class="mi">2</span>
</pre></div>
</div>
<p>记住，如果在<code class="docutils literal notranslate"><span class="pre">[]</span></code>
运算符里指定了一个值，那么创建的就是数组而不是切片。只有不指定值的时候，才会创建切片</p>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">&quot;fmt&quot;</span>
    <span class="s2">&quot;reflect&quot;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="o">//</span> <span class="n">创建有5个元素的字符串数组</span>
    <span class="n">array1</span> <span class="p">:</span><span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;hu1&quot;</span><span class="p">,</span><span class="s2">&quot;hu2&quot;</span><span class="p">,</span><span class="s2">&quot;hu3&quot;</span><span class="p">,</span><span class="s2">&quot;hu4&quot;</span><span class="p">,</span><span class="s2">&quot;hu5&quot;</span><span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;array1的值是 </span><span class="si">%s</span><span class="s2">,数据类型是%T</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">array1</span><span class="p">,</span><span class="n">array1</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">reflect</span><span class="o">.</span><span class="n">TypeOf</span><span class="p">(</span><span class="n">array1</span><span class="p">)</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>

    <span class="o">//</span> <span class="n">创建长度和容量都是3的字符串切片</span>
    <span class="n">string1</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;s1&quot;</span><span class="p">,</span><span class="s2">&quot;s2&quot;</span><span class="p">,</span><span class="s2">&quot;s3&quot;</span><span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;string1的值是 </span><span class="si">%s</span><span class="s2">,数据类型是%T</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">string1</span><span class="p">,</span><span class="n">string1</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">reflect</span><span class="o">.</span><span class="n">TypeOf</span><span class="p">(</span><span class="n">string1</span><span class="p">)</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>
    <span class="n">string1</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">string1</span><span class="p">,</span> <span class="s2">&quot;s4&quot;</span><span class="p">,</span><span class="s2">&quot;s5&quot;</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;string1的值是 </span><span class="si">%s</span><span class="s2">,数据类型是%T</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">string1</span><span class="p">,</span><span class="n">string1</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">string1</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="append">
<h3><a class="toc-backref" href="#id18">使用append()函数为切片添加元素</a><a class="headerlink" href="#append" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>package main

import &quot;fmt&quot;

func main() {
    var numbers []int  // 声明一个整型切片
    for i := 0; i &lt; 10; i++ {
        numbers = append(numbers, i)        // 循环向切片添加10个数
        // 查看切片的长度、容量、指针变化
        fmt.Printf(&quot;len: %d cap: %d pointer: %p\n&quot;, len(numbers), cap(numbers), numbers)
    }

}
</pre></div>
</div>
<p>append()一次添加一个元素和一次性添加很多元素</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">定义3个切片</span>
<span class="n">var</span> <span class="p">(</span>
    <span class="n">car</span> <span class="p">[]</span><span class="n">string</span>
    <span class="n">car2</span> <span class="p">[]</span><span class="n">string</span>
    <span class="n">car3</span> <span class="p">[]</span><span class="n">string</span>
<span class="p">)</span>

<span class="o">//</span><span class="n">添加1个元素</span>
<span class="n">car</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="s2">&quot;hujianli1&quot;</span><span class="p">)</span>      <span class="o">//</span><span class="n">car2</span> <span class="p">[]</span><span class="n">string</span>

<span class="o">//</span> <span class="n">添加多个元素</span>
<span class="n">car2</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="s2">&quot;hujianli2&quot;</span><span class="p">,</span> <span class="s2">&quot;hujianli3&quot;</span><span class="p">)</span>    <span class="o">//</span><span class="p">[</span><span class="n">hujianli1</span> <span class="n">hujianli2</span> <span class="n">hujianli3</span><span class="p">]</span>

<span class="o">//</span> <span class="n">添加一个切片</span>
<span class="n">team</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;var1&quot;</span><span class="p">,</span> <span class="s2">&quot;var2&quot;</span><span class="p">,</span> <span class="s2">&quot;var3&quot;</span><span class="p">}</span>        <span class="o">//</span><span class="p">[</span><span class="n">hujianli1</span> <span class="n">var1</span> <span class="n">var2</span> <span class="n">var3</span><span class="p">]</span>
<span class="n">car3</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="n">team</span><span class="o">...</span><span class="p">)</span>

<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">car</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">car2</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">car3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id19">切片与数组的关系</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id6">
<h4>切片修改底层数组<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">slace</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="nb">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">slace</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">&quot;===========================&quot;</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">在数组上进行切片</span>
    <span class="n">new_slace</span> <span class="p">:</span><span class="o">=</span> <span class="n">slace</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">new_slace</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">在切片后新增数据</span>
    <span class="n">new_slace</span> <span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">new_slace</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">new_slace</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">slace</span><span class="p">)</span>
    <span class="n">new_slace</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">new_slace</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">slace</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h4>切片不修改底层数组<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>切片时强制生成底层新的数组，保证修改数据不影响原始数据</p>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span>package main

import &quot;fmt&quot;

func main() {
    // 创建字符串切片
    // 其长度和容量都是5个元素
    source := []string{&quot;Apple&quot;, &quot;Orange&quot;, &quot;Plum&quot;, &quot;Banana&quot;, &quot;Grape&quot;}

    // 对第三个元素做切片，并限制容量
    // 其长度和容量都是1个元素
    slice := source[2:3:3]
    fmt.Println(slice)
    fmt.Println(source)

    /**
    如果在创建切片时设置切片的容量和长度一样，就可以强制让新切片的第一个append 操作创建新的底层数组，与原有的底层数组分离。
     */
    // 向slice追加新字符串
    // 注意此时新创建一个数组，此数组不会改变原始数组
    slice = append(slice, &quot;Kiwi&quot;)
    fmt.Println(slice)

    // 之前数组数据没有变化
    fmt.Println(source)
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id20">组合两个切片到一个切片中</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">name1</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="nb">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="o">//</span><span class="n">切片1</span>
    <span class="n">name2</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="nb">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="o">//</span><span class="n">切片2</span>
    <span class="n">name3</span> <span class="p">:</span><span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="o">...</span><span class="p">)</span>        <span class="o">//</span> <span class="n">组合两个切片</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">name3</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id21">复制切片元素到另一个切片</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>使用Go语言内建的copy()函数，可以迅速地将一个切片的数据复制到另外一个切片空间中，copy()函数的使用格式如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>copy(destSlice, srcSlice []T) int

· srcSlice 数据来源切片
· destSlice 为复制的目标
</pre></div>
</div>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">设置元素数量为1000</span>
    <span class="n">const</span> <span class="n">elementCount</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="o">//</span> <span class="n">预分配足够多的元素切片</span>
    <span class="n">srcData</span> <span class="p">:</span><span class="o">=</span> <span class="n">make</span><span class="p">([]</span><span class="nb">int</span><span class="p">,</span> <span class="n">elementCount</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">切片赋值</span>
    <span class="k">for</span> <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">elementCount</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">srcData</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">引用切片数据</span>
    <span class="n">refData</span> <span class="p">:</span><span class="o">=</span> <span class="n">srcData</span>

    <span class="n">copyData</span> <span class="p">:</span><span class="o">=</span> <span class="n">make</span><span class="p">([]</span><span class="nb">int</span><span class="p">,</span> <span class="n">elementCount</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">将数据复制到新的切片空间中</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">copyData</span><span class="p">,</span> <span class="n">srcData</span><span class="p">)</span>
    <span class="n">srcData</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">999</span> <span class="o">//</span> <span class="n">修改原始数据的第一个元素</span>
    <span class="o">//</span> <span class="n">打印引用切片的第一个元素</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">refData</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>             <span class="o">//</span> <span class="mi">999</span>
    <span class="o">//</span> <span class="n">打印复制切片的第一个和最后一个元素</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">copyData</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">copyData</span><span class="p">[</span><span class="n">elementCount</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="o">//</span> <span class="mi">0</span> <span class="mi">999</span>
    <span class="o">//</span> <span class="n">复制原始数据4</span><span class="o">~</span><span class="mf">6.</span><span class="n">不包括6</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">copyData</span><span class="p">,</span> <span class="n">srcData</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="n">copyData</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>   <span class="o">//</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id22">迭代切片</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="nb">list</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="nb">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">i2</span> <span class="p">:</span><span class="o">=</span> <span class="nb">range</span> <span class="nb">list</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;index </span><span class="si">%d</span><span class="s2"> is </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i2</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">);</span> <span class="n">index</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;index </span><span class="si">%d</span><span class="s2"> is </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s2">&quot;-------------只获取值--------------------&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">value</span> <span class="p">:</span><span class="o">=</span> <span class="nb">range</span> <span class="nb">list</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;value is </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id23">从切片中删除元素</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Go语言中切片删除元素的本质是：
以被删除元素为分界点，将前后两个部分的内存重新连接起来。</p>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">seq</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">}</span>
    <span class="o">//</span> <span class="n">指定删除位置</span>
    <span class="n">index</span> <span class="p">:</span><span class="o">=</span> <span class="mi">2</span>
    <span class="o">//</span> <span class="n">查看删除位置之前和之后的元素</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">seq</span><span class="p">[:</span><span class="n">index</span><span class="p">],</span> <span class="n">seq</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span> <span class="o">//</span><span class="p">[</span><span class="n">a</span> <span class="n">b</span><span class="p">]</span> <span class="p">[</span><span class="n">d</span> <span class="n">e</span><span class="p">]</span>

    <span class="o">//</span> <span class="n">将删除之前和之后的元素连接起来</span>
    <span class="n">new_seq</span> <span class="p">:</span><span class="o">=</span> <span class="n">append</span><span class="p">(</span><span class="n">seq</span><span class="p">[:</span><span class="n">index</span><span class="p">],</span> <span class="n">seq</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">...</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">new_seq</span><span class="p">)</span>        <span class="o">//</span><span class="p">[</span><span class="n">a</span> <span class="n">b</span> <span class="n">d</span> <span class="n">e</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id24">在函数间传递切片</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="code go highlight-default notranslate"><div class="highlight"><pre><span></span>package main

import &quot;fmt&quot;

func main() {
    // 分配包含100万个整型值的切片
    slice := make([]int, 1e6)

    /**
    由于与切片关联的数据包含在底层数组里，不属于切片本身，
    所以将切片复制到任意函数的时候，对底层数组大小都不会有影响。
    复制时只会复制切片本身，不会涉及底层数组
     */

    /**
    在函数间传递24字节的数据会非常快速、简单。这也是切片效率高的地方。
    不需要传递指针和处理复杂的语法，只需要复制切片，按想要的方式修改数据，然后传递回一份新的切片副本。
     */
    // 将slice传递到函数foo
    slice = foo(slice)
    fmt.Println(slice)


}

// 定义一个接收切片的函数，传入值slice
func foo(slice []int) []int {
    return slice
}
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="03.映射（map）-建立事务关联的容器.html" class="btn btn-neutral float-right" title="2.3. 02.映射（map）-建立事务关联的容器" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01.数组-固定大小的连续空间.html" class="btn btn-neutral float-left" title="2.1. 数组-固定大小的连续空间" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, huxiaojian

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>