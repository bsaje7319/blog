

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.5. 字符串应用 &mdash; 运维开发修炼之路</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'1.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: ''
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="next" title="1.6. 常量–恒定不变的值" href="06.常量.html" />
    <link rel="prev" title="1.4. 变量声明周期 - 变量能够使用的代码范围" href="04.变量声明周期.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> 小健_Linux-Python-Devops_Blog
          

          
            
            <img src="../../_static/python_go.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Go语言学习</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">1. Go语言基本语法与使用</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01.声明变量.html">1.1. 声明变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="02.数据类型.html">1.2. 数据类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="03.指针.html">1.3. 指针</a></li>
<li class="toctree-l3"><a class="reference internal" href="04.变量声明周期.html">1.4. 变量声明周期 - 变量能够使用的代码范围</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.5. 字符串应用</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.5.1. 字符串拼接</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string">1.5.2. 有关string的处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">1.5.3. 计算字符串长度</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">1.5.4. 遍历字符串-获取每一个字符串元素</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unicode">1.5.5. 按Unicode字符遍历字符串</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="06.常量.html">1.6. 常量–恒定不变的值</a></li>
<li class="toctree-l3"><a class="reference internal" href="07.类型别名.html">1.7. 类型别名</a></li>
<li class="toctree-l3"><a class="reference internal" href="08.编译与工具.html">1.8. 编译与工具</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../02.容器-存储与组织数据的方式/index.html">2. 容器-存储与组织数据的方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03.流程控制/index.html">3. 流程控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04.函数/index.html">4. 函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05.结构体/index.html">5. 结构体</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06.接口/index.html">6. 接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07.包/index.html">7. 包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08.并发/index.html">8. 并发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09.Go语言基础之反射/index.html">9. Go语言基础之反射</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10.Go标准库/index.html">10. Go标准库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11.项目代码/index.html">11. 项目代码</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Python/index.html">Python自动化运维</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Go_vs_Python/index.html">Go vs Python</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Linux-Python-Devops_Blog</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Go语言学习</a> &raquo;</li>
        
          <li><a href="index.html">1. Go语言基本语法与使用</a> &raquo;</li>
        
      <li>1.5. 字符串应用</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Go/01.Go语言基本语法与使用/05.字符串应用.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id10">字符串应用</a><ul>
<li><a class="reference internal" href="#id2" id="id11">字符串拼接</a></li>
<li><a class="reference internal" href="#string" id="id12">有关string的处理</a></li>
<li><a class="reference internal" href="#id3" id="id13">计算字符串长度</a></li>
<li><a class="reference internal" href="#id4" id="id14">遍历字符串-获取每一个字符串元素</a><ul>
<li><a class="reference internal" href="#ascii" id="id15">遍历每一个ASCII字符</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unicode" id="id16">按Unicode字符遍历字符串</a><ul>
<li><a class="reference internal" href="#id5" id="id17">获取字符串的某一段字符</a></li>
<li><a class="reference internal" href="#id6" id="id18">修改字符串</a></li>
<li><a class="reference internal" href="#id7" id="id19">连接字符串</a></li>
<li><a class="reference internal" href="#id8" id="id20">格式化</a></li>
<li><a class="reference internal" href="#base64" id="id21">Base64解码-电子邮件的基础解码格式</a></li>
<li><a class="reference internal" href="#ini" id="id22">从INI配置文件中查询需要的值</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id1">
<h1><a class="toc-backref" href="#id10">1.5. 字符串应用</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id11">1.5.1. 字符串拼接</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>·直接使用运算符</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>str := &quot;beijing wellcom to you&quot; + &quot;beibei jingjing huanhuan yy nini&quot;
fmt.Println(str)

s := &quot;hello &quot; + &quot;hujianli&quot;
s += &quot;study golang! &quot;
fmt.Println(s)      //hello hujianlistudy golang!
</pre></div>
</div>
<p>· fmt.Sprintf()</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ss</span> <span class="p">:</span><span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">2020</span><span class="p">,</span> <span class="s2">&quot;年&quot;</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>     <span class="o">//</span><span class="mi">2020</span> <span class="n">年</span>
</pre></div>
</div>
<p>· strings.Join()</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hu</span> <span class="p">:</span><span class="o">=</span><span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">([]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;hello world&quot;</span><span class="p">,</span> <span class="s2">&quot;hujianli&quot;</span><span class="p">},</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">hu</span><span class="p">)</span>     <span class="o">//</span><span class="n">hello</span> <span class="n">world</span><span class="p">,</span><span class="n">hujianli</span>
</pre></div>
</div>
<p>·bytes.Buffer</p>
<p>这个比较理想，可以当成可变字符使用，对内存的增长也有优化，如果能预估字符串的长度，还可以用
buffer.Grow() 接口来设置 capacity。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">buffer</span>  <span class="nb">bytes</span><span class="o">.</span><span class="n">Buffer</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">buffer</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>        <span class="o">//</span><span class="n">hello</span><span class="p">,</span><span class="n">world</span>
</pre></div>
</div>
<p>·strings.Builder</p>
<p>strings.Builder 内部通过 slice 来保存和管理内容。slice
内部则是通过一个指针指向实际保存内容的数组。strings.Builder 同样也提供了
Grow()
来支持预定义容量。当我们可以预定义我们需要使用的容量时，strings.Builder
就能避免扩容而创建新的 slice 了。strings.Builder是非线程安全，性能上和
bytes.Buffer 相差无几。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">b1</span> <span class="n">strings</span><span class="o">.</span><span class="n">Builder</span>
<span class="n">b1</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&quot;ABC&quot;</span><span class="p">)</span>
<span class="n">b1</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="s2">&quot;DEF&quot;</span><span class="p">)</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">b1</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>        <span class="o">//</span><span class="n">ABCDEF</span>
</pre></div>
</div>
</div>
<div class="section" id="string">
<h2><a class="toc-backref" href="#id12">1.5.2. 有关string的处理</a><a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span>strings 包提供了很多操作字符串的简单函数，通常一般的字符串操作需求都可以在这个包中找到。下面简单举几个例子：

判断是否以某字符串打头  strings.HasPrefix(s, prefix string) bool

判断是否以某字符串结尾  strings.HasSuffix(s, suffix string) bool

字符串分割 strings.Split(s, sep string) []string

返回子串索引 strings.Index(s, substr string) int strings.LastIndex 最后一个匹配索引

字符串连接 strings.Join(a []string, sep string) string 另外可以直接使用“+”来连接两个字符串

字符串替换 strings.Replace(s, old, new string, n int) string

字符串转化为大小写 strings.ToUpper(s string) string strings.ToLower(s string) string

统计某个字符在字符串出现的次数 strings.Count(s, substr string) int

判断字符串的包含关系 strings.Contains(s, substr string) bool
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id13">1.5.3. 计算字符串长度</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">tip1</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;hujianli00001&quot;</span>

    <span class="n">tip2</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;hujianli02&quot;</span>
    <span class="n">tip3</span> <span class="p">:</span><span class="o">=</span><span class="s2">&quot;胡建力&quot;</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tip1</span><span class="p">))</span>      <span class="o">//</span><span class="mi">13</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tip2</span><span class="p">))</span>      <span class="o">//</span><span class="mi">10</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tip3</span><span class="p">))</span>      <span class="o">//</span><span class="mi">9</span>
<span class="p">}</span>
</pre></div>
</div>
<p>每个中文占3个字节，中文len后结果为9.如果希望按照字符串个数进行计算，就要使用Go语言中的UTF-8包提供的RuneCountInString()函数，
统计Uncode字符数量。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">utf8</span><span class="o">.</span><span class="n">RuneCountInString</span><span class="p">(</span><span class="s2">&quot;你好&quot;</span><span class="p">))</span>   <span class="o">//</span><span class="mi">2</span>
<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">utf8</span><span class="o">.</span><span class="n">RuneCountInString</span><span class="p">(</span><span class="s2">&quot;你好，安河桥&quot;</span><span class="p">))</span>       <span class="o">//</span><span class="mi">6</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id14">1.5.4. 遍历字符串-获取每一个字符串元素</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ascii">
<h3><a class="toc-backref" href="#id15">遍历每一个ASCII字符</a><a class="headerlink" href="#ascii" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>package main

import &quot;fmt&quot;

func main() {
    theme := &quot;狙击 start&quot;

    for i := 0; i&lt; len(theme); i++{
        fmt.Printf(&quot;ascii: %c %d \n&quot;,theme[i],theme[i])
    }
}



/*ascii: ç 231
ascii:  139
ascii:  153
ascii: å 229
ascii:  135
ascii: » 187
ascii:   32
ascii: s 115
ascii: t 116
ascii: a 97
ascii: r 114
ascii: t 116 */
</pre></div>
</div>
</div>
</div>
<div class="section" id="unicode">
<h2><a class="toc-backref" href="#id16">1.5.5. 按Unicode字符遍历字符串</a><a class="headerlink" href="#unicode" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">theme</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;狙击 start&quot;</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">s</span> <span class="p">:</span><span class="o">=</span> <span class="nb">range</span> <span class="n">theme</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;Unicode: </span><span class="si">%c</span><span class="s2"> </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="o">/*</span><span class="n">Unicode</span><span class="p">:</span> <span class="n">狙</span> <span class="mi">29401</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">击</span> <span class="mi">20987</span>
<span class="n">Unicode</span><span class="p">:</span>   <span class="mi">32</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">s</span> <span class="mi">115</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">t</span> <span class="mi">116</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">a</span> <span class="mi">97</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">r</span> <span class="mi">114</span>
<span class="n">Unicode</span><span class="p">:</span> <span class="n">t</span> <span class="mi">116</span><span class="o">*/</span>
</pre></div>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id17">获取字符串的某一段字符</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">&quot;fmt&quot;</span>
    <span class="s2">&quot;strings&quot;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">tracer</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;死神来了,死神bye bye&quot;</span>
    <span class="n">comma</span> <span class="p">:</span><span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">tracer</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="o">//</span> <span class="n">获取索引</span>
    <span class="o">//</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">comma</span><span class="p">)</span>
    <span class="n">pos</span> <span class="p">:</span><span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">tracer</span><span class="p">[</span><span class="n">comma</span><span class="p">:],</span> <span class="s2">&quot;死神&quot;</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">comma</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">tracer</span><span class="p">[</span><span class="n">comma</span><span class="o">+</span><span class="n">pos</span><span class="p">:])</span>
<span class="p">}</span>

<span class="o">/*</span><span class="mi">12</span> <span class="mi">1</span> <span class="n">死神bye</span> <span class="n">bye</span><span class="o">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id18">修改字符串</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="s2">&quot;fmt&quot;</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ange1</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;Heros never die&quot;</span>
    <span class="n">angeleBytes</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span> <span class="n">byte</span><span class="p">(</span><span class="n">ange1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="n">angeleBytes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">angeleBytes</span><span class="p">))</span>
<span class="p">}</span>

<span class="o">/*</span><span class="n">Heros</span>       <span class="n">die</span><span class="o">*/</span>
</pre></div>
</div>
<p>GO语言中的字符串和其他高级语言（java C#）一样，默认是不可变的。
字符串不可变的好处有很多，如天生线程安全，大家使用的都是只读对象，无须加锁；
再者，方便内存共享，而不必使用写时复制等技术，字符串的hash值也只需要制作一份。</p>
<p>代码中实际修改的是[]byte，[]byte在Go语言中是可变的，本身就是一个切片。
完成对[]byte操作后，在使用string()将[]byte转为字符串时，重新创建一个新的字符串。</p>
<p>总结：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>· Go语言的字符串时不可变的
· 修改字符串时，可以将字符串转换为[]byte进行修改
· []byte和string可以通过强制类型转换互转。
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id19">连接字符串</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">&quot;bytes&quot;</span>
    <span class="s2">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">hammer</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;吃我一锤&quot;</span>
    <span class="n">sickle</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;去死吧&quot;</span>

    <span class="o">//</span> <span class="n">声明字节缓冲</span>
    <span class="n">var</span> <span class="n">stringBuilder</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">Buffer</span>

    <span class="o">//</span> <span class="n">把字符串写入缓冲</span>
    <span class="n">stringBuilder</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">hammer</span><span class="p">)</span>
    <span class="n">stringBuilder</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">sickle</span><span class="p">)</span>

    <span class="o">//</span> <span class="n">将缓冲以字符串形式输出</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">stringBuilder</span><span class="o">.</span><span class="n">String</span><span class="p">())</span>

<span class="p">}</span>

<span class="o">//</span><span class="n">吃我一锤去死吧</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id20">格式化</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>格式化在逻辑中非常常用，使用格式化函数，要注意写法：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>fmt.Sprintf(格式化样式，参数列表)
</pre></div>
</div>
<p>· 格式化样式： 字符串形式，格式化动词以%开头。 ·
参数列表：多个参数以逗号分隔，个数必须与格式化样式中的个数一一对应，否则运行时会报错。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>package main

import &quot;fmt&quot;

func main() {
    var progress = 2
    var target = 8
    title := fmt.Sprintf(&quot;已采集%d个草药，还需要%d个完成任务&quot;, progress, target)
    fmt.Println(title)
    pi := 3.14159
    // 按照数值本身的格式输出
    variant := fmt.Sprintf(&quot;%v %v %v&quot;, &quot;月球基地&quot;, pi, true)
    fmt.Println(variant)

    // 匿名结果图声明，并赋予初值
    profile := &amp;struct {
        Name string
        HP   int
    }{
        Name: &quot;rat&quot;,
        HP:   150,
    }
    fmt.Printf(&quot;使用‘%%+v’ %+v\n&quot;, profile)
    fmt.Printf(&quot;使用‘%%#v’ %#v\n&quot;, profile)
    fmt.Printf(&quot;使用‘%%T’ %T\n&quot;, profile)
}


/*已采集2个草药，还需要8个完成任务
月球基地 3.14159 true
使用‘%+v’ &amp;{Name:rat HP:150}
使用‘%#v’ &amp;struct { Name string; HP int }{Name:&quot;rat&quot;, HP:150}
使用‘%T’ *struct { Name string; HP int }*/
</pre></div>
</div>
<p><img alt="image0" src="../../_images/go_format0001.png" /></p>
</div>
<div class="section" id="base64">
<h3><a class="toc-backref" href="#id21">Base64解码-电子邮件的基础解码格式</a><a class="headerlink" href="#base64" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">&quot;encoding/base64&quot;</span>
    <span class="s2">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">需要处理的字符串</span>
    <span class="n">mesage</span> <span class="p">:</span><span class="o">=</span> <span class="s2">&quot;Away from keyboard. https://goolang.org&quot;</span>

    <span class="o">//</span> <span class="n">编码消息</span>
    <span class="n">encodeMessage</span> <span class="p">:</span><span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">StdEncoding</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">([]</span><span class="n">byte</span><span class="p">(</span><span class="n">mesage</span><span class="p">))</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">encodeMessage</span><span class="p">)</span> <span class="o">//</span> <span class="n">输出编码完成的消息</span>
    <span class="o">//</span><span class="n">QXdheSBmcm9tIGtleWJvYXJkLiBodHRwczovL2dvb2xhbmcub3Jn</span>

    <span class="o">//</span><span class="n">解码消息</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">StdEncoding</span><span class="o">.</span><span class="n">DecodeString</span><span class="p">(</span><span class="n">encodeMessage</span><span class="p">)</span>
    <span class="o">//</span><span class="n">出错处理</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">打印解码完成的数据</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>           <span class="o">//</span><span class="n">Away</span> <span class="kn">from</span> <span class="nn">keyboard.</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">goolang</span><span class="o">.</span><span class="n">org</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="ini">
<h3><a class="toc-backref" href="#id22">从INI配置文件中查询需要的值</a><a class="headerlink" href="#ini" title="Permalink to this headline">¶</a></h3>
<p>example.ini</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">core</span><span class="p">]</span>
<span class="n">repositoryformatversion</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">filemode</span> <span class="o">=</span> <span class="n">false</span>
<span class="n">bare</span> <span class="o">=</span> <span class="n">false</span>
<span class="n">logallrefupdates</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">symlinks</span> <span class="o">=</span> <span class="n">false</span>
<span class="n">ignorecase</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">hideDotFiles</span> <span class="o">=</span> <span class="n">dotGitOnly</span>
<span class="p">[</span><span class="n">remote</span> <span class="s2">&quot;origin&quot;</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">davyxu</span><span class="o">/</span><span class="n">cellnet</span>
<span class="n">fetch</span> <span class="o">=</span> <span class="o">+</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/*</span><span class="p">:</span><span class="n">refs</span><span class="o">/</span><span class="n">remotes</span><span class="o">/</span><span class="n">origin</span><span class="o">/*</span>
<span class="p">[</span><span class="n">branch</span> <span class="s2">&quot;master&quot;</span><span class="p">]</span>
<span class="n">remote</span> <span class="o">=</span> <span class="n">origin</span>
<span class="n">merge</span> <span class="o">=</span> <span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<div class="section" id="id9">
<h4>从INI文件中取值的函数<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span>package main

import (
    &quot;bufio&quot;
    &quot;fmt&quot;
    &quot;os&quot;
    &quot;strings&quot;
)

//根据文件名，段名，键名获取ini的值
func getValue(filename, expectSection, expectKey string) string {
    // 打开文件
    file, err := os.Open(filename)
    // 文件找不到返回空
    if err != nil {
        return &quot;&quot;
    }
    // 在函数结束时，关闭文件
    defer file.Close()
    // 使用读取器读取文件
    reader := bufio.NewReader(file)
    // 当前读取的段的名字
    var sectionName string
    for {
        // 读取文件的一行
        linestr, err := reader.ReadString(&#39;\n&#39;)
        if err != nil {
            break
        }
        // 切掉行的左右两边的空白字符
        linestr = strings.TrimSpace(linestr)
        // 忽略空行
        if linestr == &quot;&quot; {
            continue
        }
        // 忽略注释
        if linestr[0] == &#39;:&#39; {
            continue
        }
        // 行首和行尾分别是方括号的，说明是段标记的起止符
        if linestr[0] == &#39;[&#39; &amp;&amp; linestr[len(linestr)-1] == &#39;]&#39; {
            // 将段名取出
            sectionName = linestr[1 : len(linestr)-1]
            // 这个段是希望读取的
        } else if sectionName == expectSection {
            //切开等号分割的键值对
            pair := strings.Split(linestr, &quot;=&quot;)
            // 保证切开只有1个等号分割的简直情况
            if len(pair) == 2 {
                // 去掉键的多余空白字符
                key := strings.TrimSpace(pair[0])
                // 是期望的值
                if key == expectKey {
                    // 返回去掉空白字符的值
                    return strings.TrimSpace(pair[1])
                }
            }
        }

    }
    return &quot;&quot;

}
func main() {
    fmt.Println(getValue(&quot;example.ini&quot;, &quot;remote \&quot;origin\&quot;&quot;, &quot;fetch&quot;))
    fmt.Println(getValue(&quot;example.ini&quot;, &quot;core&quot;, &quot;hideDotFiles&quot;))
}
</pre></div>
</div>
<p>函数使用说明：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>getValue() 函数的声明如下：
func getValue(filename, expectSection, expectKey string) string

参数说明如下。
    · filename：INI 文件的文件名。
    · expectSection：期望读取的段。
    · expectKey：期望读取段中的键。
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="06.常量.html" class="btn btn-neutral float-right" title="1.6. 常量–恒定不变的值" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="04.变量声明周期.html" class="btn btn-neutral float-left" title="1.4. 变量声明周期 - 变量能够使用的代码范围" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, huxiaojian

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>